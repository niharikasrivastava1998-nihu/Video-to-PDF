<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repurpose Pro | Infographic Carousel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&family=Playfair+Display:wght@900&family=Inter:wght@400;700&family=Space+Grotesk:wght@300;700&family=Fira+Code&display=swap" rel="stylesheet">
    <style>
        .slide-card { aspect-ratio: 1/1; width: 350px; position: relative; overflow: hidden; border-radius: 12px; transition: transform 0.3s; }
        .slide-card:hover { transform: scale(1.02); }
        .pattern-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.15; pointer-events: none; }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen p-8">

    <div class="max-w-6xl mx-auto">
        <div class="flex flex-col md:flex-row gap-8">
            
            <div class="w-full md:w-80 space-y-6 bg-slate-800 p-6 rounded-2xl border border-white/10 h-fit">
                <h1 class="text-xl font-black text-blue-400 italic">CREATOR ENGINE V2</h1>
                
                <div>
                    <label class="text-xs font-bold text-slate-400 uppercase">1. Content Source</label>
                    <textarea id="transcript" rows="6" class="w-full bg-slate-900 border border-slate-700 rounded-xl p-3 text-xs mt-2 focus:ring-2 focus:ring-blue-500" placeholder="Paste transcript here..."></textarea>
                </div>

                <div>
                    <label class="text-xs font-bold text-slate-400 uppercase">2. Font Style</label>
                    <select id="fontStyle" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-2 mt-2 text-sm">
                        <option value="Montserrat, sans-serif">Modern Bold (Montserrat)</option>
                        <option value="'Playfair Display', serif">Elegant Serif (Playfair)</option>
                        <option value="'Space Grotesk', sans-serif">Tech Minimal (Space)</option>
                        <option value="'Fira Code', monospace">Developer (Fira Code)</option>
                    </select>
                </div>

                <div>
                    <label class="text-xs font-bold text-slate-400 uppercase">3. Template Palette</label>
                    <div id="templateGrid" class="grid grid-cols-5 gap-2 mt-2">
                        </div>
                </div>

                <button onclick="buildCarousel()" class="w-full bg-blue-600 hover:bg-blue-500 py-4 rounded-xl font-bold shadow-lg transition-all active:scale-95">
                    GENERATE CAROUSEL
                </button>
                
                <button onclick="exportPDF()" id="downloadBtn" class="hidden w-full bg-emerald-600 hover:bg-emerald-500 py-3 rounded-xl font-bold text-sm">
                    DOWNLOAD PDF (HI-RES)
                </button>
            </div>

            <div class="flex-1">
                <div id="slideContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="col-span-full py-20 text-center opacity-30 border-2 border-dashed border-slate-700 rounded-3xl">
                        <p>Your infographic slides will appear here...</p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        const palettes = [
            { name: "Ocean", bg: "#0072bb", text: "#ffffff", accent: "#00f2fe" },
            { name: "Midnight", bg: "#0f172a", text: "#f8fafc", accent: "#38bdf8" },
            { name: "Sunset", bg: "#fb923c", text: "#ffffff", accent: "#78350f" },
            { name: "Eco", bg: "#064e3b", text: "#ecfdf5", accent: "#34d399" },
            { name: "Berry", bg: "#701a75", text: "#fdf4ff", accent: "#f472b6" },
            { name: "Minimal", bg: "#ffffff", text: "#0f172a", accent: "#e2e8f0" },
            { name: "Industrial", bg: "#27272a", text: "#fafafa", accent: "#fbbf24" },
            { name: "Corporate", bg: "#1e3a8a", text: "#ffffff", accent: "#93c5fd" },
            { name: "Modern", bg: "#000000", text: "#ffffff", accent: "#ffffff" },
            { name: "Soft", bg: "#fef2f2", text: "#991b1b", accent: "#fecaca" }
        ];

        let selectedPalette = palettes[0];
        let slidesData = [];

        // Init Template Grid
        const grid = document.getElementById('templateGrid');
        palettes.forEach((p, i) => {
            const btn = document.createElement('button');
            btn.className = "h-8 rounded border border-white/10 transition-transform hover:scale-110";
            btn.style.backgroundColor = p.bg;
            btn.onclick = () => { selectedPalette = p; buildCarousel(); };
            grid.appendChild(btn);
        });

        function getInfographic(keyword) {
            // Procedural SVG Logic
            const k = keyword.toLowerCase();
            if(k.includes("growth") || k.includes("up")) return `<path d="M10 90 L40 60 L70 75 L130 30" fill="none" stroke="currentColor" stroke-width="8" stroke-linecap="round"/>`;
            if(k.includes("data") || k.includes("tech")) return `<rect x="20" y="20" width="40" height="40" fill="currentColor"/><rect x="70" y="70" width="40" height="40" fill="currentColor" opacity="0.5"/>`;
            return `<circle cx="50" cy="50" r="30" fill="none" stroke="currentColor" stroke-width="5" stroke-dasharray="10 5"/>`;
        }

        function buildCarousel() {
            const text = document.getElementById('transcript').value;
            if(!text) return alert("Paste content first!");

            // Logic: Split transcript into 4-10 chunks intelligently
            const sentences = text.split(/[.!?]/).filter(s => s.trim().length > 10);
            const slideCount = Math.min(Math.max(Math.ceil(sentences.length / 2), 4), 10);
            
            const container = document.getElementById('slideContainer');
            container.innerHTML = "";
            slidesData = [];

            for(let i=0; i < slideCount; i++) {
                const chunk = sentences.slice(i*2, (i*2)+2).join(". ");
                const slide = {
                    title: i === 0 ? "Key Insights From This Video" : `Point #${i}`,
                    content: chunk,
                    isCover: i === 0
                };
                slidesData.push(slide);

                const card = document.createElement('div');
                card.className = "slide-card shadow-2xl p-8 flex flex-col justify-between";
                card.style.backgroundColor = selectedPalette.bg;
                card.style.color = selectedPalette.text;
                card.style.fontFamily = document.getElementById('fontStyle').value;

                card.innerHTML = `
                    <div class="pattern-overlay" style="background-image: radial-gradient(${selectedPalette.accent} 1px, transparent 1px); background-size: 20px 20px;"></div>
                    <div class="z-10">
                        <span class="text-[10px] uppercase tracking-widest opacity-60">Slide ${i+1}/${slideCount}</span>
                        <h2 class="text-2xl font-black mt-2 leading-tight uppercase">${slide.title}</h2>
                    </div>
                    <div class="z-10 mb-8 opacity-90 text-sm leading-relaxed">${slide.content.substring(0, 150)}...</div>
                    <svg viewBox="0 0 150 100" class="z-10 w-24 h-24 self-end opacity-40" style="color: ${selectedPalette.accent}">
                        ${getInfographic(slide.content)}
                    </svg>
                `;
                container.appendChild(card);
            }
            document.getElementById('downloadBtn').classList.remove('hidden');
        }

        async function exportPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF({ orientation: 'p', unit: 'px', format: [1080, 1080] });
            const font = document.getElementById('fontStyle').value;

            slidesData.forEach((slide, i) => {
                if(i > 0) doc.addPage();
                
                // Draw Background
                doc.setFillColor(selectedPalette.bg);
                doc.rect(0, 0, 1080, 1080, 'F');

                // Draw Branding Accent
                doc.setDrawColor(selectedPalette.accent);
                doc.setLineWidth(10);
                doc.line(100, 950, 980, 950);

                // Add Text
                doc.setTextColor(selectedPalette.text);
                doc.setFontSize(60);
                doc.text(slide.title, 100, 200, { maxWidth: 880 });
                
                doc.setFontSize(30);
                doc.text(slide.content, 100, 350, { maxWidth: 880, lineHeightFactor: 1.5 });
                
                doc.setFontSize(20);
                doc.text(`Page ${i+1}`, 100, 1000);
            });

            doc.save("Professional_Carousel.pdf");
        }
    </script>
</body>
</html>
